<script src="../js/jquery.tmpl.min.js" type="text/javascript">
</script>

<script type="text/x-jquery-tmpl" id="qos">
  	<div class="VPNDialogTable">
	<form id="qosForm" method="post" action="">
	<table width="85%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td width="15%">
				<span>
					上传:
				</span>
			</td>
			<td width="80%">
				<input class="{required:true,messages:{required:'请输入上传网速'},checkdecimal:true,checkMaximum:true} textinput5" type="text" id="upload" name="upload" />
				<div class="Prompt3"></div>
			</td>
			<td width="5%">
			<font>Mbps</font>
			</td>
		</tr>
		<tr>
			<td>
				<span>
					下载:
				</span>
			</td>
			<td>
				<input class="{required:true,messages:{required:'请输入下载网速'},checkdecimal:true,checkMaximum:true} textinput5" type="text" id="download" name="download" />
				<div class="Prompt3"></div>
			</td>
			<td width="10%">
			<font>Mbps</font>
			</td>
		</tr>
		<tr>
			<td colspan="2">
				<div class="VPNDialogbut">
					<button class="xiaobtn" id="qosbtn">
						确定
						</button>
				</div>
			</td>
		</tr>
	</table>
	</form>
	</div>
</script>
<script type="text/x-jquery-tmpl" id="qosList">
<div class="qosblackbai">
               <form id="qosListForm" method="post" action="">      
			<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
				<tr>
					<td>
						<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0"
						class="blacktr">
							<tr>
								<td width="20%">
									设备名称
								</td>
								<td width="20%">
									IP地址
								</td>
								<td width="25%">
									当前网速
								</td>
                                <td width="35%">
									模式
								</td>
							</tr>
						</table>
						<td>
				</tr>
				<tr>
					<td>
						<table id="devices" width="100%" border="0" align="center" cellpadding="0" cellspacing="0"
						class="baixian">
							{{each(i,device) list}}
							<tr>
								<td width="20%">
								   ${device.hostname}
								</td>
                                <td width="20%">
									${device.ip}
								</td>
                                <td width="25%">
									<div class="velocity"><div class="shangtr">${(device.statistics.upspeed/1024).toFixed(0)}KB/s</div><div class="xiatr">${(device.statistics.downspeed/1024).toFixed(0)}KB/s</div><div class="clear"></div></div>
								</td>
                                <td width="35%">
									<div class="pattern">
                                    <div class="velocity">
                                    <div class="shanginput"><input id="shqos${i+1}" name="shqos${i+1}" class="{required:true,messages:{required:'请输入上传网速'},checkdecimal2:true} textinput9" value="${device.qos.upmax}" type="text" />KB/s<div class="Prompt4"></div></div>
                                    <div class="xiainput"><input id="xiaqos${i+1}" name="xiaqos${i+1}" class="{required:true,messages:{required:'请输入下载网速'},checkdecimal2:true} textinput9" value="${device.qos.downmax}" type="text" />KB/s<div class="Prompt4"></div></div>
                                    <div class="clear"></div><input type="hidden" id="mac${i+1}" value="${device.mac}" /></div>
								    </div>
                                    <div class="pattern2">智能</div>
                                </td>
							</tr>
							{{/each}}
						</table>
					</td>
				</tr>
                <tr>
									<td>
											<div class="ddnsbut2">
												<button class="xiaobtn left" id="ddnsbtn" type="submit">保存生效</button>
													<span class="tishi">0值代表不限速</span>
											   <div class="clear"></div>
											</div>
									</td>
								</tr>
			</table>
			</form>
		</div>
</script>

<script type="text/javascript">
    var index;
    $('#qosdialogtable').html($("#qos").html());
	$("#updateBtn").click(function() {
		index=layer.open({
			type: 1,
			title: '手动设置外网带宽',
			area: ['500px', 'auto'],
			shadeClose: false,
			content: $('#qosdialogtable')
		});
	})
</script>